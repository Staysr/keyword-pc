(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e7f047a"],{"3e22":function(e,t,a){var i=a("93a7"),o=a("1111").EXISTS,r=a("e7ec"),n=a("6f4d").f,l=Function.prototype,d=r(l.toString),s=/^\s*function ([^ (]*)/,c=r(s.exec),u="name";i&&!o&&n(l,u,{configurable:!0,get:function(){try{return c(s,d(this))[1]}catch(e){return""}}})},4971:function(e,t,a){},"7b57":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"100%","margin-left":"20px","margin-top":"40px",display:"block",position:"relative",top:"30px"}},[a("span",{staticStyle:{"font-size":"20px"}},[e._v(e._s(e.data.keyword))])]),a("div",{staticStyle:{position:"relative",left:"1150px",top:"50px"}},[a("el-popconfirm",{attrs:{"confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-info","icon-color":"red",title:"确定删除吗？"},on:{confirm:e.okdelete}},[a("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("删除")])],1),a("el-button",{staticStyle:{"margin-left":"12px"},attrs:{type:"primary"},on:{click:e.cancel}},[e._v("取消")]),a("el-button",{staticStyle:{"margin-left":"12px"},on:{click:e.okreturn}},[e._v("返回")])],1),a("div",{staticStyle:{position:"relative",left:"1080px",top:"60px"}},[0!=e.numlist?a("el-tag",[e._v("当前图片选中:"+e._s(e.numlist))]):e._e(),0!=e.videonumlist?a("el-tag",{staticStyle:{"margin-left":"12px"},attrs:{type:"warning"}},[e._v("当前视频选中:"+e._s(e.videonumlist))]):e._e()],1),a("div",{staticStyle:{"margin-top":"50px","margin-left":"20px",width:"100%"}},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"图片",name:"img"}},[a("div",{staticStyle:{display:"block",float:"left","margin-right":"12px","margin-top":"12px"}},[a("el-upload",{ref:"cropperUpload",attrs:{data:e.uploadData,limit:e.addsize,action:e.img_url,"on-progress":e.filedata,"on-success":e.bg_img1,accept:"image/png,image/jpeg,image/jpg","list-type":"picture-card","auto-upload":!0},scopedSlots:e._u([{key:"file",fn:function(e){var t=e.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"})])}}])},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),e._l(e.newdata.img,(function(t,i){return a("div",{key:i,staticStyle:{float:"left","margin-left":"10px","margin-bottom":"12px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticStyle:{width:"110px",height:"110px"}},[a("div",{staticStyle:{position:"relative",left:"100px",top:"12px"}},[a("el-checkbox-group",{on:{change:e.handleCheckChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[a("el-checkbox",{attrs:{label:t}},[e._v(" ")])],1)],1),a("div",[a("el-image",{staticStyle:{width:"100px",height:"100px","margin-left":"12px"},attrs:{src:t.media_cover_img,"preview-src-list":e.srcList}})],1)])])],1)],1)}))],2),a("el-tab-pane",{attrs:{label:"视频",name:"video"}},[a("div",{staticStyle:{display:"block",float:"left","margin-right":"12px","margin-top":"2px"}},[a("el-upload",{ref:"cropperUploadvideo",attrs:{data:e.uploadDatavideo,multiple:"",action:e.video_url,"on-progress":e.videofiledataf,"on-success":e.videosuss,accept:".mp4","list-type":"picture-card","auto-upload":!0},scopedSlots:e._u([{key:"file",fn:function(e){var t=e.file;return a("div",{},[a("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:t.url,alt:""}}),a("span",{staticClass:"el-upload-list__item-actions"})])}}])},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1),e._l(e.newdata.vod,(function(t,i){return a("div",{key:i,staticStyle:{float:"left","margin-left":"10px","margin-bottom":"12px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("div",{staticStyle:{width:"110px",height:"110px","background-color":"#C0C4CC"}},[a("div",{staticStyle:{position:"relative",left:"80px"}},[a("el-checkbox-group",{on:{change:e.handleCheckChangevideo},model:{value:e.checkAllvideo,callback:function(t){e.checkAllvideo=t},expression:"checkAllvideo"}},[a("el-checkbox",{attrs:{label:t}},[e._v(" ")])],1)],1),a("div",[a("img",{staticStyle:{width:"90px",height:"90px","margin-left":"12px"},attrs:{src:t.media_cover_img},on:{click:function(a){return e.openvideo(t.media_url)}}})])])])],1)],1)}))],2),a("el-tab-pane",{attrs:{label:"文字描述",name:"text"}},[a("div",{staticStyle:{width:"900px",height:"900px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:20}},[a("el-input",{attrs:{autosize:"",type:"textarea",placeholder:"请输入内容","show-word-limit":""},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addText}},[e._v("保存")])],1)],1)],1)])],1),a("el-dialog",{attrs:{title:"视频",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("video",{staticStyle:{width:"100%",height:"100%","object-fit":"fill"},attrs:{controls:"",src:e.videoopenurl}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)])},o=[],r=a("ed3b"),n=(a("e186"),a("3e22"),{data:function(){return{timeout:"",checkAll:[],checkAllvideo:[],numlist:0,videonumlist:0,partSize:"",parallel:"",retryCount:"",retryDuration:"",textid:"",uploader:null,videofiledata:"",istextb:!1,addsize:1,region:"cn-shanghai",userId:"1303984639806000",activeName:"img",ImageURL:"",checkListimg:["选中且禁用","复选框 A"],data:"",name:"",cancelname:"img",newdata:"",textarea:"",uploadAuth:"",uploadAddress:"",isvideo_img:1,videoId:"",srcList:[],videoopenurl:"",dialogImageUrl:"",dialogVisible:!1,imghandleCheckChange:[],videohandleCheckChange:[],img_url:localStorage.getItem("baseUrl")+"/cms/media/createUploadImage?token="+localStorage.getItem("token"),video_url:localStorage.getItem("baseUrl")+"/cms/media/createUploadVideo?token="+localStorage.getItem("token"),uploadData:{title:"素材库",description:"素材库",cateId:"5099",tags:"dspseo",fileName:"/Users/admin/Desktop/image/IMG_7536.jpg"},uploadDatavideo:{title:"素材库",description:"素材库",cateId:"5100",tags:"dspseo",fileName:"/Users/admin/Downloads/652ebb55fb1f2760313d10f1651a6b.MP4"}}},mounted:function(){this.data=JSON.parse(this.$route.query.item),this.name=this.$route.query.type,this.keyWorddetail(),-1==this.name||0==this.name?this.activeName="img":1==this.name?this.activeName="video":this.activeName="text"},methods:{keyWorddetail:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getkeyWorddetail({id:e.data.id,token:localStorage.getItem("token")});case 2:if(a=t.sent,200==a.code){for(e.newdata=a.data,i=0;i<a.data.img.length;i++)e.srcList.push(a.data.img[i].media_url);e.textarea=a.data.text[0].media_text,e.textid=0==a.data.text.length?""==e.textid:a.data.text[0].id}else e.error(a.msg);case 4:case"end":return t.stop()}}),t)})))()},okreturn:function(){this.$router.go(-1)},videosuss:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:console.log(e),200==e.code?(t.isvideo_img=2,t.uploadAuth=e.data.UploadAuth,t.uploadAddress=e.data.UploadAddress,t.videoId=e.data.VideoId,i='{"Vod":{}}',t.uploader=t.createUploader(),t.uploader.addFile(t.videofiledata,null,null,null,i),t.uploader.startUpload()):t.error(e.msg);case 2:case"end":return a.stop()}}),a)})))()},addText:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.istextb=!0,t.next=3,e.$api.pushaddText({id:e.textid,keyword_id:e.data.id,keyword:e.data.keyword,media_text:e.textarea,token:localStorage.getItem("token")});case 3:a=t.sent,200==a.code?(e.istextb=!1,e.$message({message:"保存成功",type:"success"}),e.textarea="",e.keyWorddetail()):e.error(a.msg);case 5:case"end":return t.stop()}}),t)})))()},openvideo:function(e){this.videoopenurl=e,this.dialogVisible=!0},bg_img1:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:200==e.code?(t.isvideo_img=1,t.uploadAuth=e.data.UploadAuth,t.uploadAddress=e.data.UploadAddress,t.videoId=e.data.ImageId,t.ImageURL=e.data.ImageURL,i='{"Vod":{}}',t.uploader=t.createUploader(),t.uploader.addFile(t.file,null,null,null,i),t.uploader.startUpload()):t.error(e.msg);case 1:case"end":return a.stop()}}),a)})))()},createUploader:function(e){var t=this,a=new AliyunUpload.Vod({timeout:t.timeout||6e4,partSize:t.partSize||1048576,parallel:t.parallel||5,retryCount:t.retryCount||3,retryDuration:t.retryDuration||2,region:t.region,userId:t.userId,onUploadstarted:function(e){a.setUploadAuthAndAddress(e,t.uploadAuth,t.uploadAddress,t.videoId)},onUploadSucceed:function(e){t.addImg()},onUploadProgress:function(e,a,i){t.$message({message:"文件上传中"+e.file.name+", fileSize:"+a+", percent:"+Math.ceil(100*i)+"%"})},onUploadFailed:function(e,a,i){t.uploadAuth="",t.uploadAddress="",t.videoId="",t.ImageURL="",t.error("文件上传失败: "+e.file.name+", code: "+a+", message:"+i)},onUploadCanceled:function(e,a,i){t.error("文件已暂停上传: "+e.file.name+", code: "+a+", message:"+i)}});return a},addImg:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a="",1!=e.isvideo_img){t.next=9;break}return t.next=4,e.$api.addImg({keyword_id:e.data.id,keyword:e.data.keyword,media_id:e.videoId,media_name:e.data.keyword,media_ext:"png",media_cate_id:"5099",media_url:e.ImageURL,token:localStorage.getItem("token")});case 4:i=t.sent,a=i,e.$refs.cropperUpload.clearFiles(),t.next=14;break;case 9:return t.next=11,e.$api.addvideo({keyword_id:e.data.id,keyword:e.data.keyword,media_id:e.videoId,media_name:e.data.keyword,media_ext:"mp4",media_cate_id:"5100",token:localStorage.getItem("token")});case 11:o=t.sent,a=o,e.$refs.cropperUploadvideo.clearFiles();case 14:200==a.code&&(e.keyWorddetail(),self.uploadAuth="",self.uploadAddress="",self.videoId="",self.ImageURL="",e.$message({message:"上传成功",type:"success"}));case 15:case"end":return t.stop()}}),t)})))()},handleCheckChange:function(e){this.numlist=e.length;for(var t=[],a=0;a<e.length;a++)t.push(e[a].id);this.imghandleCheckChange=t},okdelete:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.deletedata({ids:"img"==e.cancelname?e.imghandleCheckChange:e.videohandleCheckChange,keyword_id:e.data.id,type:"img"==e.cancelname?0:1,token:localStorage.getItem("token")});case 2:a=t.sent,"img"==e.cancelname?(e.checkAll=[],e.numlist=0):(e.checkAllvideo=[],e.videonumlist=0),200==a.code?(e.$message({message:"删除成功",type:"success"}),"img"==e.cancelname?e.imghandleCheckChange=[]:e.videohandleCheckChange=[],e.keyWorddetail()):e.error(a.msg);case 5:case"end":return t.stop()}}),t)})))()},handleCheckChangevideo:function(e){this.videonumlist=e.length;for(var t=[],a=0;a<e.length;a++)t.push(e[a].id);this.videohandleCheckChange=t},deletetextok:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,t.$api.deletedata({ids:e.id,keyword_id:t.data.id,type:2,token:localStorage.getItem("token")});case 3:i=a.sent,200==i.code?(t.$message({message:"删除成功",type:"success"}),t.keyWorddetail()):t.error(i.msg);case 5:case"end":return a.stop()}}),a)})))()},filedata:function(e,t,a){this.file=t.raw},cancel:function(){"img"==this.cancelname?(this.checkAll=[],this.numlist=0):(this.checkAllvideo=[],this.videonumlist=0)},handleClick:function(e,t){this.cancelname=e.name},videofiledataf:function(e,t,a){this.videofiledata=t.raw},error:function(e){this.$message({message:e,type:"error"})}}}),l=n,d=(a("7d22"),a("cba8")),s=Object(d["a"])(l,i,o,!1,null,null,null);t["default"]=s.exports},"7d22":function(e,t,a){"use strict";a("4971")}}]);
//# sourceMappingURL=chunk-0e7f047a.be6a0201.js.map